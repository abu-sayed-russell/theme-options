jQuery(document).ready(function ($) {  /**  Ajax Backup & Restore MOD **///backup button  $('#of_backup_button').live('click', function () {    var answer = confirm("Click OK to backup your current saved options.")    if (answer) {      var clickedObject = $(this);      var clickedID = $(this).attr('id');      var nonce = $('#security').val();      var data = {        action: 'of_ajax_post_action',        type: 'backup_options',        security: nonce      };      $.post(ajaxurl, data, function (response) {        //check nonce        if (response == -1) { //failed          var fail_popup = $('#of-popup-fail');          fail_popup.fadeIn();          window.setTimeout(function () {            fail_popup.fadeOut();          }, 2000);        } else {          var success_popup = $('#of-popup-save');          success_popup.fadeIn();          window.setTimeout(function () {            location.reload();          }, 1000);        }      });    }    return false;  });//restore button  $('#of_restore_button').live('click', function () {    var answer = confirm("'Warning: All of your current options will be replaced with the data from your last backup! Proceed?")    if (answer) {      var clickedObject = $(this);      var clickedID = $(this).attr('id');      var nonce = $('#security').val();      var data = {        action: 'of_ajax_post_action',        type: 'restore_options',        security: nonce      };      $.post(ajaxurl, data, function (response) {        //check nonce        if (response == -1) { //failed          var fail_popup = $('#of-popup-fail');          fail_popup.fadeIn();          window.setTimeout(function () {            fail_popup.fadeOut();          }, 2000);        } else {          var success_popup = $('#of-popup-save');          success_popup.fadeIn();          window.setTimeout(function () {            location.reload();          }, 1000);        }      });    }    return false;  });  /**  Ajax Transfer (Import/Export) Option */  $('#of_import_button').live('click', function () {    var answer = confirm("Click OK to import options.")    if (answer) {      var clickedObject = $(this);      var clickedID = $(this).attr('id');      var nonce = $('#security').val();      var import_data = $('#export_data').val();      var data = {        action: 'of_ajax_post_action',        type: 'import_options',        security: nonce,        data: import_data      };      $.post(ajaxurl, data, function (response) {        var fail_popup = $('#of-popup-fail');        var success_popup = $('#of-popup-save');        //check nonce        if (response == -1) { //failed          fail_popup.fadeIn();          window.setTimeout(function () {            fail_popup.fadeOut();          }, 2000);        } else {          success_popup.fadeIn();          window.setTimeout(function () {            location.reload();          }, 1000);        }      });    }    return false;  });  /** AJAX Save Options */  $('#of_save').live('click', function () {    var nonce = $('#security').val();    $('.ajax-loading-img').fadeIn();    //get serialized data from all our option fields    var serializedReturn = $('#of_form :input[name][name!="security"][name!="of_reset"]').serialize();    $('#of_form :input[type=checkbox]').each(function () {      if (!this.checked) {        serializedReturn += '&' + this.name + '=0';      }    });    var data = {      type: 'save',      action: 'of_ajax_post_action',      security: nonce,      data: serializedReturn    };    $.post(ajaxurl, data, function (response) {      var success = $('#of-popup-save');      var fail = $('#of-popup-fail');      var loading = $('.ajax-loading-img');      loading.fadeOut();      if (response == 1) {        success.fadeIn();      } else if (response == 2) {        success.fadeIn();        console.log('Custom.css not created, because WordPress doesn\'t have permission to create file! Please add ftp credential to your wp-config.php (Please contact support for more info.)');      } else {        fail.fadeIn();      }      window.setTimeout(function () {        success.fadeOut();        fail.fadeOut();      }, 2000);    });    return false;  });  /* AJAX Options Reset */  $('#of_reset').click(function () {    //confirm reset    var answer = confirm("Click OK to reset. All settings will be lost and replaced with default settings!");    //ajax reset    if (answer) {      var nonce = $('#security').val();      $('.ajax-reset-loading-img').fadeIn();      var data = {        type: 'reset',        action: 'of_ajax_post_action',        security: nonce,      };      $.post(ajaxurl, data, function (response) {        var success = $('#of-popup-reset');        var fail = $('#of-popup-fail');        var loading = $('.ajax-reset-loading-img');        loading.fadeOut();        if (response == 1) {          success.fadeIn();          window.setTimeout(function () {            location.reload();          }, 1000);        } else {          fail.fadeIn();          window.setTimeout(function () {            fail.fadeOut();          }, 2000);        }      });    }    return false;  });  //Current Menu Class  $('#of-nav li a').click(function(evt){    $('#of-nav li').removeClass('current');    $(this).parents('li').addClass('current');    if( $(this).parent().find('.sub-nav') ) {      $(this).parent().find('.sub-nav li').eq(0).addClass('current');    }    var clicked_group = $(this).attr('href');    $.cookie('of_current_opt', clicked_group, { expires: 7, path: '/' });    $('.group').hide();    $(clicked_group).fadeIn('fast');    return false;  });  //Expand Options  var flip = 0;  $('#expand_options').click(function(){    if(flip == 0){      flip = 1;      $('#of_container #of-nav').hide();      $('#of_container #content').removeClass('sidebar').addClass('no-sidebar');      $('#of_container .group').add('#of_container .group h2').show();      $(this).removeClass('expand');      $(this).addClass('close');      $(this).text('Close');    } else {      flip = 0;      $('#of_container #of-nav').show();      $('#of_container #content').removeClass('no-sidebar').addClass('sidebar');      $('#of_container .group').add('#of_container .group h2').hide();      $('#of_container .group:first').show();      $('#of_container #of-nav li').removeClass('current');      $('#of_container #of-nav li:first').addClass('current');      $(this).removeClass('close');      $(this).addClass('expand');      $(this).text('Expand');    }  });});